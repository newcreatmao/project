/***************************************************************************
实验名称： 阵列LED显示实验

实验模块:  51单片机核心板、矩阵LED区

实验接线： 51单片机核心板------矩阵LED区
					P0 ------------ J16
					P2 ------------ J17
					P1 ------------ J14
					P3 ------------ J15
					
现象描述：矩阵LED循环显示“欢迎使用通用单片机实验装置”

更新时间：2017.10.17
***************************************************************************/
#include<reg52.h>
#define uint unsigned int 
#define uchar unsigned char

uint code Tab[][32] = {
	{0xFF,0xFC,0xFF,0xFC,0x80,0xFC,0x9F,0x80,0x1F,0x9E,0x49,0xCE,0x03,0xF9,0x87,0xF9,  
	0xE7,0xF9,0xC3,0xF0,0x93,0xF0,0x19,0xE6,0x7C,0xE6,0x3F,0xCF,0x9F,0x9F,0xCF,0x3F},	//  "欢" 1

	{0xFF,0xFF,0xF3,0xFC,0x27,0x82,0x27,0x93,0x3F,0x93,0x3F,0x93,0x20,0x93,0x27,0x93,  
	0x27,0x93,0x27,0x80,0x27,0xC2,0x27,0xF3,0xE7,0xF3,0xC3,0xF3,0x19,0x00,0xFF,0xFF},	//	"迎" 2
	
	{0xE7,0xF9,0xE7,0xF9,0x07,0x00,0xF3,0xF9,0xF3,0xF9,0x11,0x80,0x91,0x99,0x90,0x99,  	    
	0x13,0x80,0xF3,0xF9,0x33,0xF9,0x73,0xF8,0xF3,0xFC,0x73,0xF8,0x33,0xE3,0x83,0x0F},	//  "使" 3
	
	{0xFF,0xFF,0x03,0xC0,0x73,0xCE,0x73,0xCE,0x73,0xCE,0x03,0xC0,0x73,0xCE,0x73,0xCE,  
	0x73,0xCE,0x03,0xC0,0x73,0xCE,0x73,0xCE,0x73,0xCE,0x79,0xCE,0x79,0xC2,0xFC,0xE7},	//  "用" 4
	
	{0xFF,0xFF,0x19,0xC0,0xF3,0xE7,0x73,0xF0,0xFF,0xF9,0x1F,0x80,0x90,0x99,0x93,0x99,  
	0x13,0x80,0x93,0x99,0x93,0x99,0x13,0x80,0x93,0x99,0x93,0x81,0x81,0xCF,0x0C,0x00},	//  "通" 5
	
	{0xFF,0xFF,0x03,0xC0,0x73,0xCE,0x73,0xCE,0x73,0xCE,0x03,0xC0,0x73,0xCE,0x73,0xCE,  
	0x73,0xCE,0x03,0xC0,0x73,0xCE,0x73,0xCE,0x73,0xCE,0x79,0xCE,0x79,0xC2,0xFC,0xE7},	//  "用" 6
	
	{0xE7,0xE7,0xCF,0xF3,0x9F,0xF9,0x03,0xC0,0x73,0xCE,0x73,0xCE,0x03,0xC0,0x73,0xCE,  
	0x73,0xCE,0x03,0xC0,0x7F,0xFE,0x7F,0xFE,0x00,0x00,0x7F,0xFE,0x7F,0xFE,0x7F,0xFE},	//  "单" 7
	
	{0xFF,0xF9,0xE7,0xF9,0xE7,0xF9,0xE7,0xF9,0xE7,0xF9,0x07,0x80,0xE7,0xFF,0xE7,0xFF,  	  
	0xE7,0xFF,0x07,0xF0,0xE7,0xF3,0xE7,0xF3,0xE7,0xF3,0xF3,0xF3,0xF3,0xF3,0xF9,0xF3},	//	"片" 8
	
	{0xE7,0xFF,0x67,0xE0,0x67,0xE6,0x67,0xE6,0x00,0xE6,0x67,0xE6,0x63,0xE6,0x43,0xE6,  
	0x01,0xE6,0x01,0xE6,0x64,0xE6,0x67,0x26,0x67,0x26,0x27,0x27,0x27,0x0F,0x87,0xFF},	//	"机" 9
	
	{0x3F,0xFF,0x7F,0xFE,0x01,0x00,0xF9,0x3F,0xCC,0x9C,0x9F,0xFC,0x9F,0xFC,0xE7,0xFC,  
	0xCF,0xFC,0xCF,0xFC,0x00,0x00,0x7F,0xF8,0x3F,0xF3,0x9F,0xE7,0xC7,0xCF,0xF1,0x9F},	//	"实" 10
	
	{0xFF,0xF3,0xC0,0xF3,0xCF,0xE1,0xC9,0xE1,0xC9,0xCC,0x49,0x9E,0x09,0x00,0x81,0xFF,  
	0x9F,0x99,0x9F,0x93,0x07,0x92,0x90,0xC0,0x99,0xCC,0x9F,0xE7,0x03,0x00,0xE7,0xFF},	//	"验" 11

	{0xCF,0xF3,0xC9,0xF3,0x03,0x00,0xCF,0xF3,0xC7,0xF3,0xC3,0xF3,0x48,0x80,0x0F,0xFF,  
	0x7F,0xFE,0x00,0x00,0x1F,0xFE,0x8F,0xCC,0x83,0xE1,0x18,0xE2,0x1F,0x0F,0x9F,0xFF},	//	"装" 12
	
	{0x01,0x80,0x99,0x99,0x01,0x80,0x7F,0xFE,0x01,0x80,0x7F,0xFE,0x07,0xE0,0xE7,0xE7,  
	0x07,0xE0,0xE7,0xE7,0x07,0xE0,0xE7,0xE7,0x07,0xE0,0xE7,0xE7,0x00,0x00,0xFF,0xFF}	//	"置" 13
	
	};

void mDelay(uint Delay)	//延时
{	uchar i;
	for(;Delay > 0;Delay--)
		for(i = 0;i < 110;i++);
}

void main()				//主函数
{
	uchar i,j,a,b;
	uint k;
	while(1)
	{ 
		for(i = 0;i < 13;i++)			 	//显示13个字（欢迎使用通用单片机实验装置）
		{
			for(k = 0;k < 100;k++)		   	//每一个字扫描显示100次
			{
				P1 = 0;					  	//设置初始值
				P3 = 0;
				a = 1;
				b = 1;
				for(j = 0;j < 16;j++)	   	//扫描16行点阵
				{
					P0 = Tab[i][j*2];		//扫描每一行的前八位
					P2 = Tab[i][j*2+1];		//扫描每一行的后八位
					
					if(j < 8)				//前八行设置哪一行显示
					{
						P1 = P1|a;			//当前显示的那一行置高
						mDelay(1);
						P1 = P1&0;
						a *= 2;
					}
					else					//后八行设置哪一行显示
					{
						P3 = P1|b;			//当前显示的那一行置高
						mDelay(1);
						P3 = P3&0;
						b *= 2;	
					}
				}				
			}
		}
    }
}
