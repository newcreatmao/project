C51 COMPILER V9.54   USER                                                                  07/06/2023 11:26:10 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE USER
OBJECT MODULE PLACED IN .\Objects\user.obj
COMPILER INVOKED BY: D:\51project\Keil_v5\C51\BIN\C51.EXE user.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Lis
                    -tings\user.lst) TABS(2) OBJECT(.\Objects\user.obj)

line level    source

   1          #include "REG52.h"
   2          #include "BASIC.h"
   3          #include "HEAD.h"
   4          #include "delay.h"
   5          int sum;//超声波测距结果
   6          unsigned int limit=15;//小车与障碍物的限制限制距离
   7          unsigned char lochoice[9]={0x00,0xFE,0xFD,0xFB,0xF7,0xEF,0xDF,0xBF,0x7F};//由左到右
   8          unsigned char displaynum[10]={0x3F, 0x06, 0x5B, 0x4F, 0x66, 0x6D, 0x7D, 0x07, 0x7F, 0x6F};//0-9
   9          
  10          int opration(int num)
  11          {
  12   1          
  13   1        int n=0;
  14   1        if(num==0)
  15   1        {return 1;}
  16   1        while(num)
  17   1        {
  18   2          num=num/10;
  19   2          n++;
  20   2        }
  21   1      
  22   1        return n;
  23   1      }
  24          
  25          void display(int Data,int location)
  26          {
  27   1        int n=0;
  28   1        int pp=0;
  29   1        for(n=location+opration(Data)-1;n>=location;n--)
  30   1      {
  31   2        P0=0xFF;
  32   2        WS=1;//打开位控
  33   2        P0=lochoice[n];
  34   2        WS=0;//关闭位控
  35   2        
  36   2        pp=0;
  37   2        pp=Data%10;
  38   2        Data/=10;
  39   2        MS=1;//打开段控
  40   2        P0=displaynum[pp];
  41   2        MS=0;//关闭段控
  42   2        delayms(2);
  43   2      }
  44   1      }
  45          void xunji()
  46          {
  47   1        if(left_led==1 && right_led==1)
  48   1          forward();
  49   1        if(left_led==0 && right_led==1)
  50   1          right();
  51   1        if(left_led==1 && right_led==0)
  52   1          left();
  53   1        if(left_led==0 && right_led==0)
  54   1          back_right();
C51 COMPILER V9.54   USER                                                                  07/06/2023 11:26:10 PAGE 2   

  55   1      }
  56          
  57          void red()
  58          {
  59   1        TMOD = 0x11;//设置定时器模式
  60   1        TL1 = 0;//设置定时器初始值
  61   1        TH1 = 0;//设置定时器初始值
  62   1        
  63   1        TRIG = 1;
  64   1        Delay20us();//发射一段脉冲，至少20us
  65   1        TRIG = 0;
  66   1        
  67   1        while(!ECHO);//等待超声波模块返回脉冲
  68   1        TR1=1;//打开定时器
  69   1        while(ECHO);//等待超声波定时器返回脉冲结束
  70   1        TR1 = 0;//停止计数器，计时结束
  71   1        
  72   1        sum=((TH1*256+TL1)*0.034)/2+1;//计算距离
  73   1        if(limit<sum)
  74   1        {forward();}
  75   1        if(limit>sum)
  76   1        {
  77   2          backward();
  78   2      }
  79   1          display(sum,5);
  80   1      }
  81          
  82          void key2_long()  //按下松开响音
  83          { 
  84   1        for(;;)
  85   1        {
  86   2          if(key2==0)
  87   2          {
  88   3            delayms(5);
  89   3            if(key2==0)
  90   3            { 
  91   4              delayms(10);
  92   4              beep=0;
  93   4              delayms(200);
  94   4              beep=1;
  95   4              break;
  96   4            }
  97   3          }
  98   2        }
  99   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    355    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     23       8
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
