C51 COMPILER V9.54   MAIN                                                                  07/09/2023 12:36:15 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\51project\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\user) DEBUG OBJECTEX
                    -TEND PRINT(.\Listings\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          /*
   2          #include <REGX52.H>
   3          
   4          
   5          void timer()//配置定时器0，12t为1us计时,以一秒为例，最高寄存数值为65535
   6          {
   7            //TMOD=0x01;//不可位寻址(寄存器只能整体赋值),将模式寄存器变成0000 0001，重新定义会刷新
   8            
   9            TMOD=TMOD&0xf0;//把低四位全部清零，高四位不变
  10            TMOD=TMOD|0x01;//把最低位置为1，0与1或为1
  11            
  12            //TCON可位寻址（寄存器中的位可单独赋值），将控制寄存器
  13            TF0=0;//定时器清零，将定时器状态调为非中断，防止刚定义就进入
  14            TR0=1;//打开定时器
  15            
  16            //TH0=64535/256;//高位初始寄存器,初始值/256
  17            TH0=0xfc;
  18            //TL0=64535%256;//低位初始寄存器,初始值%256，256为十六进制,有一个us的差别(益出时要多加一个1)
  19            TL0=0x18;
  20            //高八位与低八位合起来得最终初值
  21            
  22            ET0=1;//T0开关
  23            EA=1;//中断总开关
  24            PT0=0;//中断优先级
  25          }
  26          
  27          int main ()
  28          {
  29            timer();
  30            while(1)
  31            {
  32            
  33            }
  34          
  35          }
  36          
  37          void fun() interrupt 1//中断函数，每在主函数中运行定义的时间后进入，函数名可改，中断标识固定
  38          {
  39            TH0=64535/256;//高位初始寄存器,初始值/256
  40            TL0=64535%256+1;//低位初始寄存器,初始值%256，256为十六进制
  41            //重新赋初始值，使每次间隔时间一致，不赋值会从0开始重新到最大值
  42            
  43            
  44            
  45          }//一般跟着主函数，尽量不要进行比较长的操作
  46          */


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   ----    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
C51 COMPILER V9.54   MAIN                                                                  07/09/2023 12:36:15 PAGE 2   

   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
