C51 COMPILER V9.54   MAIN                                                                  05/02/2024 14:01:17 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\51project\Keil_v5\keil\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(
                    -.\Listings\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include "stdio.h"
   2          #include "reg52.h"
   3          
   4          #define uchar unsigned char 
   5          #define uint unsigned int
   6          
   7            /* ???? */
   8          #define D P0  
   9          sbit E=P2^7;
  10          sbit RW=P2^5;
  11          sbit RS=P2^6;
  12          
  13          void delay_ms(uchar xms);           /* ???? */
  14          void LcdWriteCom(uchar com);          /* LCD1602??8?????? */
  15          void LcdWriteData(uchar dat)  ;       /* LCD1602??8?????? */
  16          void LcdInit();                 /* LCD1602?????? */ 
  17          void Show_string1(uchar a[]);           /* ????????? ??   "" ????????????? */
  18          void Show_string2(uchar a[]);         /* ???     "" ????????????? */
  19          void show_string(uchar add,uchar a[]);      /* ????????? ?? ????  0~27   40~67   ???,"?????" */
  20          void show_number(uchar add,uint a);       /* show_number(0x? ??????,????? */
  21          void show_float(uchar add,float a);       /* ????? */
  22          
  23          void main()
  24          {
  25   1        LcdInit();              /* LCD1602????? */
  26   1        Show_string1("2200340202");   /* LCD1602??->??? */
  27   1        Show_string2("guyuanyuan");
  28   1        while(1);
  29   1      }
  30          
  31          /* ???? */
  32          void delay_ms(uchar xms)
  33          {
  34   1        uchar i,j;
  35   1        for(i=xms;i>0;i--)
  36   1          for(j=110;j>0;j--);
  37   1      }
  38          
  39          /* ?1602?????
  40           * ??:com ??
  41           * ??? : ?
  42           */
  43          void LcdWriteCom(uchar com)
  44          {
  45   1        E=0;
  46   1        RW=0;
  47   1        RS=0;
  48   1        D=com;
  49   1        delay_ms(5);
  50   1        E=1;
  51   1        delay_ms(5);
  52   1        E=0;
  53   1      }
  54          /* ?1602?????
C51 COMPILER V9.54   MAIN                                                                  05/02/2024 14:01:17 PAGE 2   

  55           * ??: dat ??
  56           * ???: ?
  57           */
  58          void LcdWriteData(uchar dat)
  59          {
  60   1        E=0;
  61   1        RW=0;
  62   1        RS=1;
  63   1        D=dat;
  64   1        delay_ms(5);
  65   1        E=1;
  66   1        delay_ms(5);
  67   1        E=0;
  68   1      }
  69          
  70          /* LCD1602?????
  71           */
  72          void LcdInit()
  73          {
  74   1        LcdWriteCom(0x38);
  75   1        LcdWriteCom(0x0c);
  76   1        LcdWriteCom(0x06);
  77   1        LcdWriteCom(0x01);
  78   1        LcdWriteCom(0x80);
  79   1      }
  80          
  81          
  82          /* ?????????
  83           * ?? add ?? ??? 0~27
  84           *               ??? 40~67
  85           *      a[] ??? "abc" 
  86           */
  87          void show_string(uchar add,uchar a[])
  88          {
  89   1        uchar i;
  90   1        LcdWriteCom(0x80+add);
  91   1        for(i=0;a[i]!='\0';i++)
  92   1        {
  93   2          LcdWriteData(a[i]);
  94   2        }
  95   1      }
  96          
  97          /* ????????
  98           */
  99          void Show_string1(uchar a[])
 100          {
 101   1        uchar i;
 102   1        LcdWriteCom(0x80);
 103   1        for(i=0;a[i]!='\0';i++)
 104   1        {
 105   2          LcdWriteData(a[i]);
 106   2        }
 107   1      }
 108          
 109          /* ????????
 110           */
 111          void Show_string2(uchar a[])
 112          {
 113   1        uchar i;
 114   1        LcdWriteCom(0x80+0X40);
 115   1        for(i=0;a[i]!='\0';i++)
 116   1        {
C51 COMPILER V9.54   MAIN                                                                  05/02/2024 14:01:17 PAGE 3   

 117   2          LcdWriteData(a[i]);
 118   2        }
 119   1      }
 120          
 121          /* ???????? 
 122          */
 123          void show_number(uchar add,uint a)
 124          {
 125   1        char s[10];
 126   1        sprintf(s,"%d",a);        
 127   1        show_string(add,(uchar *)s);    /* ???? */
 128   1      }
 129          
 130          /* ?????????
 131          */
 132          void show_float(uchar add,float a)
 133          {
 134   1        char s[10];
 135   1        sprintf(s,"% .1f",a);/* ???? */
 136   1        show_string(add,(uchar *)s);
 137   1      }
 138          
 139          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    288    ----
   CONSTANT SIZE    =     31    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      35
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
