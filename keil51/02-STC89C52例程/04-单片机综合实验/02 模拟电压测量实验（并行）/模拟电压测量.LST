C51 COMPILER V9.54   ____________                                                          06/05/2024 14:51:36 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE ____________
OBJECT MODULE PLACED IN 模拟电压测量.OBJ
COMPILER INVOKED BY: D:\51project\Keil_v5\keil\C51\BIN\C51.EXE 模拟电压测量.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEN
                    -D TABS(2)

line level    source

   1          /***************************************************************************
   2          实验名称： 模拟电压测量实验(并行)
   3          
   4          实验模块:  51单片机核心板、液晶显示区（12864）、并行AD转换区
   5          
   6          实验接线：  51单片机核心板------并行AD转换区
   7                     P3.0--------------START
   8                     P3.1--------------EOC
   9                     P3.2--------------OE
  10                     P3.3--------------CLKX2
  11                  P1.0~P1.7--------------D0~D7    
  12          
  13                51单片机核心板------液晶显示区（12864字符液晶）
  14                     P2.0--------------CS1
  15                     P2.1--------------CS2
  16                     P2.2--------------CS
  17                     P2.3--------------RW
  18                     P2.4--------------E
  19                  P0.0~P0.7--------------DB0~DB7    
  20                      
  21          现象描述：  12864显示电压值
  22          
  23          更新时间：  2017.10.18
  24          ***************************************************************************/
  25          
  26          
  27          
  28          #include <reg52.H>
  29          #include <12864.c>
  30          sbit START = P3^0;
  31          sbit EOC = P3^1;
  32          sbit OE  = P3^2;
  33          sbit CLK = P3^3;
  34          unsigned char getdata;
  35          
  36          /************************************************/
  37          //定时器初始化
  38          void init()
  39          {
  40   1      
  41   1        LCD12864_Init();
  42   1        LCD12864_Clear();
  43   1        Display();
  44   1          TMOD= 0x03;// 定时器0工作方式3
  45   1          TH0 = 0xff;// 定时器0赋初值
  46   1          TL0 = 0x00;
  47   1          TR0 = 1;
  48   1          ET0 = 1;
  49   1          EA  = 1;
  50   1      
  51   1      }
  52          
  53          /***********************************************/
  54          //软件延时产生ADC0809的时钟
C51 COMPILER V9.54   ____________                                                          06/05/2024 14:51:36 PAGE 2   

  55          void clk() interrupt 1
  56          { 
  57   1              CLK=(~CLK);
  58   1      }
  59          
  60          
  61          /************************************************/
  62          //AD转换函数
  63          unsigned char ADC()
  64              {
  65   1               char value;
  66   1           START=0; 
  67   1           START=1;      //开始转换命令
  68   1           START=0;
  69   1           while(EOC==0);//等待转换结束
  70   1           OE=1;
  71   1           value=P1;
  72   1           OE=0;
  73   1               return value;
  74   1           }
  75          
  76          
  77          /************************************************/
  78          void main()
  79          {
  80   1        float v=0;
  81   1          init();
  82   1          START = 1;       // ST端产生正脉冲
  83   1          START = 0;
  84   1          while(1)
  85   1              {
  86   2                  v=ADC();//输出转换得到的数据
  87   2            v=v/255;
  88   2            display(v);
  89   2              }
  90   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    692    ----
   CONSTANT SIZE    =    400    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1      24
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
