C51 COMPILER V9.54   RED                                                                   04/21/2023 16:20:54 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE RED
OBJECT MODULE PLACED IN .\Objects\red.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE red.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\red.l
                    -st) TABS(2) OBJECT(.\Objects\red.obj)

line level    source

   1          #include <REGX52.H>
   2          #include "basic.h"
   3          #include "delay.h"
   4          
   5          sbit TRIG = P2^1;//定义超声波测距发送端
   6          sbit ECHO = P2^2;//定义超声波测距接收端
   7          
   8          unsigned int sum;//超声波测距结果
   9          unsigned int limit;//小车与障碍物的限制限制距离
  10          
  11          void red_control()
  12          {
  13   1        TMOD = 0x11;//设置定时器模式
  14   1        TL1 = 0;//设置定时器初始值
  15   1        TH1 = 0;//设置定时器初始值
  16   1        
  17   1        TRIG = 1;
  18   1        delayus(20);//发射一段脉冲，至少20us
  19   1        TRIG = 0;
  20   1        
  21   1        while(!ECHO);//等待超声波模块返回脉冲
  22   1        TR1=1;//打开定时器
  23   1        while(ECHO);//等待超声波定时器返回脉冲结束
  24   1        TR1 = 0;//停止计数器，计时结束
  25   1        
  26   1        sum=((TH1*256+TL1)*0.034)/2+1;//计算距离
  27   1        
  28   1        if(limit>sum)
  29   1        {
  30   2          car_lf_stop();
  31   2          car_rg_stop();
  32   2          delayms(1000);
  33   2        }
  34   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    108    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      4    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
