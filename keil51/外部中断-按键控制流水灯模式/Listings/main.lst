C51 COMPILER V9.54   MAIN                                                                  03/07/2023 11:55:20 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <REGX52.H>
   2          #include "Delay.h"
   3          #include "EX0.h"
   4          
   5          unsigned char i,Mode=0;
   6          
   7          
   8          void LED_1()
   9          {
  10   1        
  11   1        for(;i<8;i++)
  12   1        {
  13   2          if(i==7)
  14   2            i=0;
  15   2          if(Mode){ //模式1
  16   3            P2=~(0x01<<i);
  17   3            Delay(30);
  18   3          }
  19   2          else 
  20   2          {
  21   3            i=7-i;
  22   3            break;
  23   3          }
  24   2          //模式0则退出LED_1
  25   2        }
  26   1      }
  27          
  28          
  29          void LED_0()
  30          {
  31   1        for(;i<8;i++)
  32   1        { 
  33   2          if(i==7)
  34   2            i=0;
  35   2          if(Mode==0){
  36   3            P2=~(0x80>>i);
  37   3            Delay(30);
  38   3          }
  39   2          else 
  40   2          {
  41   3            i=7-i;
  42   3            break;
  43   3          }
  44   2        //模式1则退出LED_0
  45   2        }
  46   1      }
  47          
  48          void main()
  49          {
  50   1      
  51   1        EX0_Init();
  52   1        
  53   1        while(1)
  54   1        {
C51 COMPILER V9.54   MAIN                                                                  03/07/2023 11:55:20 PAGE 2   

  55   2          if(Mode==0)LED_0(); //右往左
  56   2          if(Mode==1)LED_1(); //左往右
  57   2        }
  58   1      }
  59          
  60          void EX0_ISR() interrupt 0
  61          {
  62   1        if(P3_2==0){    //按键消抖
  63   2          Delay(10);    //不消抖可能导致重复进入中断
  64   2          while(P3_2==0);
  65   2          Delay(10);
  66   2          
  67   2      //    if(Mode)Mode =0;  //模式转换
  68   2      //    else Mode=1;
  69   2          Mode=(Mode+1)%2;  //模式(0、1)切换
  70   2      
  71   2      //三个模式:
  72   2      //    Mode=(Mode+1)%2;  //模式(0、1、2)
  73   2      //    Mode=(Mode+1)%2+1;  //模式(1、2、3)
  74   2        }
  75   1      
  76   1      }
  77          //Mode = ~Mode;   计算错误（Mode为 un char型)  ~0 = 1111 1111  ~1=1111 1110
  78          
  79          
  80          
  81          
  82          
  83          
  84          
  85          
  86          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    209    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
